extends layout

block content
  head
    meta(charset='UTF-8')
    meta(http-equiv='X-UA-Compatible' content='IE=edge')
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css')
    title Document
  h1 Home
  div(class="add-div")
    form(action='/add' method='post')
      input(type='text' name='tweet' maxlength="280" required placeholder='Share something...')
      input(type="hidden" name="reqHome" value='home')
      button(type='submit' name="reqAdd" class="add-button" value="tweet") Submit
  div(class="logout-div")
    form(action='/logout?_method=DELETE' method='POST')
      button(type='submit' class="logout-button")
        i(class="fa fa-sign-out") Sign Out
  ul(class="tweet-list")
    each item in allTweets.tweets
      div(class="tweet-container")
        - if (item.tweetOwner === getUsername) {
            div(class="delete-button-container")
              form(action='/delete' method='POST')
                input(type="hidden" name="reqHome" value='home')
                button(type='submit' class="delete-button" name="reqDelete" value= item._id)
                  i(class="fa fa-trash")
        - }
        span(class="tweet-owner")= item.tweetOwner
        li(class="tweet-text")= item.tweet
        div(class="like-buttons-container")
          form(action='/like' method='POST')
            input(type="hidden" name="reqHome" value='home')
            button(type='submit' class="like-buttons like" name="reqLike" value= item._id)
              i(class="fa fa-thumbs-up")
            - if (item.likedUsers.length > 0) {
              - const getCount = item.likeCount = item.likedUsers.length; 
                span(class="tweet-like-count")= getCount
            - }
          form(action='/unlike' method='POST')
            input(type="hidden" name="reqHome" value='home')
            button(type='submit' class="like-buttons unlike" name="reqUnlike" value= item._id) 
              i(class="fa fa-thumbs-down")            
